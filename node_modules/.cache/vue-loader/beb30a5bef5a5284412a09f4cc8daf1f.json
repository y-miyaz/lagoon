{"remainingRequest":"/Users/Miyazaki/Dropbox/IdeaProjects/vue3.0/hello-world/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/Miyazaki/Dropbox/IdeaProjects/vue3.0/hello-world/src/components/ColumnList.vue?vue&type=style&index=0&id=193f1b6d&scoped=true&lang=scss&","dependencies":[{"path":"/Users/Miyazaki/Dropbox/IdeaProjects/vue3.0/hello-world/src/components/ColumnList.vue","mtime":1560574161536},{"path":"/Users/Miyazaki/Dropbox/IdeaProjects/vue3.0/hello-world/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/Miyazaki/Dropbox/IdeaProjects/vue3.0/hello-world/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/Miyazaki/Dropbox/IdeaProjects/vue3.0/hello-world/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/Miyazaki/Dropbox/IdeaProjects/vue3.0/hello-world/node_modules/sass-loader/lib/loader.js","mtime":1533139052000},{"path":"/Users/Miyazaki/Dropbox/IdeaProjects/vue3.0/hello-world/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/Miyazaki/Dropbox/IdeaProjects/vue3.0/hello-world/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nh3 {\n  margin: 40px 0 0;\n}\nul {\n  list-style-type: none;\n  padding: 0;\n}\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\na {\n  color: #42b983;\n}\n",{"version":3,"sources":["ColumnList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ColumnList.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-container fluid>\n    <v-slide-y-transition mode=\"out-in\">\n        <v-layout column wrap>\n            <v-text-field label=\"table name\" v-model=\"table_name\"></v-text-field>\n            <v-btn fab dark color=\"indigo\">\n                <v-icon dark v-on:click=\"add_column\">add</v-icon>\n            </v-btn>\n            <div v-for=\"(column, key) in column_list\">\n                <v-layout row justify-space-bet>\n                    <v-text-field label=\"column name\" v-model=\"column.column_name\"></v-text-field>\n                    <v-flex xs12 sm2 d-flex><v-select :items=\"data_types\" v-model=\"column.data_type\" label=\"data type\" class=\"px-10\"></v-select></v-flex>\n                    <v-flex xs12 sm2 d-flex><v-select :items=\"gen_types\" v-model=\"column.gen_type\" label=\"output type\" class=\"px-10\"></v-select></v-flex>\n                    <v-text-field label=\"number of times\" v-model:value=\"column.num_of_times\"></v-text-field>                    \n                    <v-text-field label=\"min\" v-model=\"column.min\"></v-text-field>\n                    <v-text-field label=\"max\" v-model=\"column.max\"></v-text-field>\n                    <v-checkbox label=\"not null\" v-model=\"column.not_null\"></v-checkbox>\n                    <v-checkbox label=\"primary key\" v-model=\"column.primary_key\"></v-checkbox>\n                    <v-btn fab dark color=\"indigo\">\n                        <v-icon dark :id=\"key\" v-on:click=\"delete_column\">delete</v-icon>\n                    </v-btn>\n                </v-layout>\n            </div>\n            <v-text-field label=\"output data num\" :value=\"output_num\"></v-text-field>\n            <v-layout justify-end>\n            <v-flex xs2>\n            <v-btn fab dark color=\"indigo\"> \n                <v-icon dark v-on:click=\"generate_sql\">arrow_downward</v-icon>\n            </v-btn>\n            </v-flex>\n            </v-layout>\n            <div v-for=\"(column, key) in column_list\"></div>\n        </v-layout>\n    </v-slide-y-transition>\n  </v-container>\n</template>\n\n<script>\nexport default {\n  name: 'column-list',\n  data: function(){\n      return {\n        table_name: \"\",\n        column_list: [],\n        data_types: [\"Integer\", \"varchar\", \"boolean\", \"blob\", \"timestamp\"],\n        gen_types: [\"incremental\", \"random\"],\n        output_num: 1,\n        output_data: []\n      }\n  },\n  methods: {\n      //カラムを追加する\n      add_column: function () {\n          this.column_list.push({\n              'column_name': \"\",\n              'data_type': \"\",\n              'gen_type': \"\",\n              'num_of_times': 1,\n              'min': \"\",\n              'max': \"\",\n              'not_null': false,\n              'primary_key': false\n          }) \n      },\n      //カラムを削除する\n      delete_column: function (event) {\n        console.log(event.target.id)\n        this.column_list.splice(event.target.id, 1);\n      },\n      //ダウンロードするSQLファイルを生成する\n      generate_sql_file: function () {\n        var sql_stmt = this.create_sql_stmt()\n        let blob = new Blob([sql_stmt], { type: 'text/sql' })\n        let link = document.createElement('a')\n        link.href = window.URL.createObjectURL(blob)\n        link.download = 'create_data.sql'\n        link.click()\n      },\n      //テストデータを生成するSQLを生成\n      create_sql_stmt: function () {\n        var sql_stmts = []\n        var current_vals = {}\n        var \n        this.column_list.forEach(element => {\n            current_vals[element.column_name] = {'current_val': element.min, 'num_of_times': element.num_of_times}\n        });\n        for (var i = 0;  i < this.output_num;  i++) {\n            \n            var line = 'INSERT INTO' + this.table_name + 'VALUES ('\n            val_pairs.forEach(el => {\n               line += get_next_val(current_vals[el.column_name], el.data_type, el.gen_type, el.min, el.max, el.num_of_times) + ','\n            })\n            line += ');'\n            sql_str += line\n        }\n        return sql_str\n      },\n      //\n      get_vals: function (column, num) {\n          var values = []\n          var val = column['min']\n          for (var i = 0; i < num;){\n              for (var j = 0; j < column['num_of_times'] && i < num; j++, i++){\n                    values.push(val)\n              }\n              val = get_val(val, column['data_type'])\n          }\n          return values\n      },\n      //生成するテストデータの次の値を取ってくる\n      get_next_val: function (current_val, data_type, gen_type, min, max, is_min_next) {\n        if (data_type == 'integer'){\n            if (gen_type == 'random'){\n                return Math.floor( Math.random() * (min + max) ) - min;\n            }else if (gen_type == 'increment'){\n                return current_val + interval;\n            }\n        } else if (data_type == 'varchar'){\n            if (gen_type == 'random'){\n                var l = Math.floor( Math.random() * (min + max) ) - min;\n                var c = \"abcdefghijklmnopqrstuvwxyz0123456789\";\n                var cl = c.length\n                var r = \"\";\n                for(var i=0; i<l; i++){\n                    r += c[Math.floor(Math.random()*cl)];\n                }\n                return r;\n            }else if(gen_type == 'increment'){\n                return \"'\" + 'test' + String.toString(current_val + interval) + \"'\";\n            }\n        } else if (data_type == 'boolean'){\n            if(gen_type == 'random'){\n                return Math.random() < 0.5;\n            }else if(gen_type == 'increment'){\n                return !current_val;\n            }\n        } else if (data_type == 'timestamp'){\n            if(gen_type == 'random'){\n                return String.toString(current_val);\n            }else if(gen_type == 'increment'){\n                return String.toString(current_val);\n            }\n        } else if (data_type == 'blob'){\n            return String.toString(current_val);\n        }\n      },\n      validate_num_of_times: function (num_of_times) {\n          return isNaN(num_of_times)\n      },\n      validate_min: function (data_type, min, max) {\n          if (!isNaN(min)){\n            if (!isNaN(max)){\n                if (Number(min) < Number(max)){\n                    return true\n                }\n            }\n          }\n          return false\n      },\n      validate_max: function (data_type, min, max) {\n        if (!isNaN(max)){\n            if (!isNaN(min)){\n                if (Number(min) < Number(max)){\n                    return true\n                }\n            }\n          }\n          return false\n      },\n      preview_output_data: function () {\n\n      }\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped lang=\"scss\">\nh3 {\n  margin: 40px 0 0;\n}\nul {\n  list-style-type: none;\n  padding: 0;\n}\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\na {\n  color: #42b983;\n}\n</style>\n"]}]}